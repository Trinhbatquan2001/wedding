(()=>{var S=(()=>{let o=null,r=null,u=0,l=0,h=!0,e=null,c=()=>{u+=1},m=()=>`(${l}/${u}) [${parseInt(l/u*100).toFixed(0)}%]`;return{init:()=>{o=document.getElementById("progress-info"),r=document.getElementById("progress-bar"),o.classList.remove("d-none"),e=new Promise(s=>document.addEventListener("undangan.progress.invalid",s))},add:c,invalid:s=>{h&&(h=!1,r.style.backgroundColor="red",o.innerText=`Error loading ${s} ${m()}`,document.dispatchEvent(new Event("undangan.progress.invalid")))},complete:(s,b=!1)=>{h&&(l+=1,o.innerText=`Loading ${s} ${b?"skipped":"complete"} ${m()}`,r.style.width=Math.min(l/u*100,100).toString()+"%",h=!1,e=null,document.dispatchEvent(new Event("undangan.progress.done")))},getAbort:()=>e}})();var C=(()=>{let o='<span class="spinner-border spinner-border-sm my-0 ms-0 me-1 p-0" style="height: 0.8rem; width: 0.8rem;"></span>',r=[["*",'<strong class="text-theme-auto">$1</strong>'],["_",'<em class="text-theme-auto">$1</em>'],["~",'<del class="text-theme-auto">$1</del>'],["```",'<code class="font-monospace text-theme-auto">$1</code>']],u=[{type:"Mobile",regex:/Android.*Mobile|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i},{type:"Tablet",regex:/iPad|Android(?!.*Mobile)|Tablet/i},{type:"Desktop",regex:/Windows NT|Macintosh|Linux/i}],l=[{name:"Chrome",regex:/Chrome|CriOS/i},{name:"Safari",regex:/Safari/i},{name:"Edge",regex:/Edg|Edge/i},{name:"Firefox",regex:/Firefox|FxiOS/i},{name:"Opera",regex:/Opera|OPR/i},{name:"Internet Explorer",regex:/MSIE|Trident/i},{name:"Samsung Browser",regex:/SamsungBrowser/i}],h=[{name:"Windows",regex:/Windows NT ([\d.]+)/i},{name:"MacOS",regex:/Mac OS X ([\d_.]+)/i},{name:"Android",regex:/Android ([\d.]+)/i},{name:"iOS",regex:/OS ([\d_]+) like Mac OS X/i},{name:"Linux",regex:/Linux/i},{name:"Ubuntu",regex:/Ubuntu/i},{name:"Chrome OS",regex:/CrOS/i}],e=t=>String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),c=t=>{let g=y=>{window.alert(`${y} ${t}`)};return{success:()=>g("\u{1F7E9}"),error:()=>g("\u{1F7E5}"),warning:()=>g("\u{1F7E8}"),info:()=>g("\u{1F7E6}"),custom:y=>g(y)}},m=t=>window.confirm(`\u{1F7E6} ${t}`),d=(t,g)=>(t.replaceChildren(document.createRange().createContextualFragment(g)),t),T=(t,g,y=.05)=>new Promise(E=>{let A=parseFloat(t.style.opacity),L=g?1:0,I=()=>{A+=g?y:-y,A=Math.max(0,Math.min(1,A)),t.style.opacity=A.toFixed(2),g&&A>=L||!g&&A<=L?(t.style.opacity=L.toString(),E(t)):requestAnimationFrame(I)};requestAnimationFrame(I)}),p=(t,g=0)=>{let y=null;y=setTimeout(()=>{t(),clearTimeout(y),y=null},g)};return{loader:o,ask:m,copy:async(t,g=null,y=1500)=>{let E=t.getAttribute("data-copy");if(!E||E.length===0){c("Nothing to copy").warning();return}t.disabled=!0;try{await navigator.clipboard.writeText(E)}catch{t.disabled=!1,c("Failed to copy").error();return}let A=t.innerHTML;d(t,g||'<i class="fa-solid fa-check"></i>'),p(()=>{t.disabled=!1,t.innerHTML=A},y)},notify:c,timeOut:p,debounce:(t,g=100)=>{let y=null;return(...E)=>{clearTimeout(y),y=setTimeout(()=>t(...E),g)}},escapeHtml:e,base64Encode:t=>{let y=new TextEncoder().encode(t);return window.btoa(String.fromCharCode(...y))},base64Decode:t=>{let g=new TextDecoder,y=Uint8Array.from(window.atob(t),E=>E.charCodeAt(0));return g.decode(y)},disableButton:(t,g="Loading",y=!1)=>{t.disabled=!0;let E=t.innerHTML;return d(t,y?g:o+g),{restore:(A=!1)=>{t.innerHTML=E,t.disabled=A}}},disableCheckbox:t=>{t.disabled=!0;let g=document.querySelector(`label[for="${t.id}"]`),y=g.innerHTML;return d(g,o+y),{restore:()=>{g.innerHTML=y,t.disabled=!1}}},safeInnerHTML:d,parseUserAgent:t=>{if(!t||typeof t!="string")return"Unknown";let g=u.find(I=>I.regex.test(t))?.type??"Unknown",y=l.find(I=>I.regex.test(t))?.name??"Unknown",E=h.find(I=>I.regex.test(t)),A=E?E.name:"Unknown",L=E?t.match(E.regex)?.[1]?.replace(/_/g,".")??null:null;return`${y} ${g} ${L?`${A} ${L}`:A}`},changeOpacity:T,getGMTOffset:t=>{let g=new Date,y=new Intl.DateTimeFormat("en-US",{timeZone:t,hourCycle:"h23",hour:"numeric"}),E=(parseInt(y.format(g))-g.getUTCHours()+24)%24;return E>12&&(E-=24),`GMT${E>=0?"+":""}${E}`},convertMarkdownToHTML:t=>(r.forEach(([g,y])=>{t=t.replace(new RegExp(`\\${g}(\\S(?:[\\s\\S]*?\\S)?)\\${g}`,"g"),y)}),t)}})();var U="POST";var D="AbortError",ee="TypeError",q={Accept:"application/json","Content-Type":"application/json"},N="request",_=(()=>{let o=null;return{getInstance:r=>{if(!o||!o.has(r))throw new Error(`please init cache first: ${r}`);return o.get(r)},restart:async r=>{o.set(r,null),o.delete(r),await window.caches.delete(r),await window.caches.open(r).then(u=>o.set(r,u))},init:(r,u=[])=>{if(!window.isSecureContext)throw new Error("this application required secure context");o=new Map,Promise.all(u.concat([N]).map(l=>window.caches.open(l).then(h=>o.set(l,h)))).then(()=>r())}}})(),F=o=>{let r=_.getInstance(o);return{set:(e,c,m,d)=>c.clone().arrayBuffer().then(T=>{if(!c.ok)return c;let p=new Date,n=new Headers(c.headers);if(n.has("Date")||n.set("Date",p.toUTCString()),m||!n.has("Cache-Control")){if(!m&&n.has("Expires")){let s=new Date(n.get("Expires"));d=Math.max(0,s.getTime()-p.getTime())}if(d===0)throw new Error("Cache max age cannot be 0");n.set("Cache-Control",`public, max-age=${Math.floor(d/1e3)}`)}return n.has("Content-Length")||n.set("Content-Length",String(T.byteLength)),r.put(e,new Response(T,{headers:n})).then(()=>c)}),has:e=>r.match(e).then(c=>{if(!c)return null;let m=c.headers.get("Cache-Control").match(/max-age=(\d+)/)[1],d=Date.parse(c.headers.get("Date"))+parseInt(m)*1e3;return Date.now()>d?null:c}),del:e=>r.delete(e)}},P=(o,r)=>{let u=new AbortController,l={signal:u.signal,credential:"include",headers:new Headers(q),method:String(o).toUpperCase()},h=0,e=0,c=0,m=0,d=!1,T=!1,p=null,n=null,s=null,b=f=>{let w=()=>{let a=()=>window.fetch(f,l).then(async t=>{if(d)return u.abort(),new Response(null,{status:t.status,statusText:t.statusText,headers:new Headers(t.headers)});if(!t.ok||!s)return t;let g=parseInt(t.headers.get("Content-Length")??0);if(g===0)return t;let y=[],E=0,A=t.body.getReader();for(;;){let{done:I,value:$}=await A.read();if(I)break;y.push($),E+=$.length,await s(E,g,window.structuredClone?window.structuredClone(y):y)}let L=t.headers.get("Content-Type")??"application/octet-stream";return new Response(new Blob(y,{type:L}),{status:t.status,statusText:t.statusText,headers:new Headers(t.headers)})});if(h===0||d)return a();if(l.method!=="GET")return console.warn("Only method GET can be cached"),a();let v=F(N);return v.has(f).then(t=>t?Promise.resolve(t):v.del(f).then(a).then(g=>v.set(f,g,T,h)))};if(e===0||c===0)return w();let i=async()=>{try{return await w()}catch(a){if(a.name===D)throw a;if(c*=2,m++,m>e)throw new Error(`Max retries reached: ${a}`);return console.warn(`Retrying fetch (${m}/${e}): ${f.toString()}`),await new Promise(v=>window.setTimeout(v,c)),i()}};return i()},x=f=>{if(f.status!==200)return Promise.resolve(f);let w=document.querySelector("a[download]");w&&document.body.removeChild(w);let i=f.headers.get("Content-Disposition")?.match(/filename="(.+)"/)?.[1];return f.clone().blob().then(a=>{let v=document.createElement("a"),t=window.URL.createObjectURL(a);return v.href=t,v.download=i||`${n}.${p||(a.type.split("/")?.[1]??"bin")}`,document.body.appendChild(v),v.click(),document.body.removeChild(v),window.URL.revokeObjectURL(t),f})};return{send(f=null){return n&&Object.keys(q).forEach(w=>l.headers.delete(w)),b(new URL(r,document.body.getAttribute("data-url"))).then(w=>n&&w.ok?x(w).then(i=>({code:i.status,data:i,error:null})):w.json().then(i=>{if(i.error){let a=i.error.at(0),v=w.status>=500;throw new Error(v?`ID: ${i.id}
\u{1F7E5} ${a}`:`\u{1F7E8} ${a}`)}return f&&(i.data=f(i.data)),Object.assign(i,{code:w.status})})).catch(w=>{if(w.name===D)return console.warn("Fetch aborted:",w),w;throw w.name===ee&&(w=new Error("\u{1F7E5} Network error or rate limit exceeded")),alert(w.message??String(w)),w})},withCache(f=1e3*60*60*6){return h=f,this},withForceCache(f=1e3*60*60*6){return T=!0,h===0&&(h=f),this},withNoBody(){return d=!0,this},withRetry(f=3,w=1e3){return e=f,c=w,this},withCancel(f){return f==null?this:((async()=>(await f,u.abort()))(),this)},withDownload(f,w=null){return n=f,p=w,this},withProgressFunc(f=null){return s=f,this},default(f=null){return l.headers=new Headers(f??{}),b(r).then(w=>n?x(w):Promise.resolve(w))},token(f){return f.split(".").length===3?(l.headers.append("Authorization","Bearer "+f),this):(l.headers.append("x-access-key",f),this)},body(f){if(l.method==="GET")throw new Error("GET method does not support body");return l.body=JSON.stringify(f),this}}};var R=o=>{let r=new Map,u=new Map,l=F(o),h=1e3*60*60*6,e=!1,c=(s,b)=>{if(!b.ok)throw new Error(b.statusText);return l.set(s,b,e,h)},m=s=>l.has(s),d=s=>l.del(s),T=(s,b=null)=>{if(r.has(s))return Promise.resolve(r.get(s));if(u.has(s))return u.get(s);let x=()=>P("GET",s).withCancel(b).withRetry().default(),f=m(s).then(w=>w?Promise.resolve(w):d(s).then(x).then(i=>c(s,i))).then(w=>w.blob()).then(w=>r.set(s,URL.createObjectURL(w))).then(()=>r.get(s)).finally(()=>u.delete(s));return u.set(s,f),f};return{run:(s,b=null)=>{let x=new Map;return s.length===0?Promise.resolve():(s.filter(f=>f!==null).forEach(f=>{let w=x.get(f.url)??[];x.set(f.url,[...w,[f.res,f?.rej]])}),Promise.allSettled(Array.from(x).map(([f,w])=>T(f,b).then(i=>(w.forEach(a=>a[0]?.(i)),i)).catch(i=>(w.forEach(a=>a[1]?.(i)),i)))))},del:d,has:m,set:c,get:T,open,download:async(s,b)=>{if(!new Map(Array.from(r.entries()).map(([f,w])=>[w,f])).has(s))try{if(!new URL(s).protocol.includes("blob"))throw new Error("Is not blob")}catch{s=await T(s)}return P("GET",s).withDownload(b).default()},setTtl(s){return h=Number(s),this},withForceCache(){return e=!0,this}}};var z=(()=>{let o=null,r=()=>{let l=document.getElementById("video-love-stroy");if(!l||!l.hasAttribute("data-src"))return l?.remove(),S.complete("video",!0),Promise.resolve();let h=l.getAttribute("data-src");if(!h)return S.complete("video",!0),Promise.resolve();let e=document.createElement("video");e.className=l.getAttribute("data-vid-class"),e.loop=!0,e.muted=!0,e.controls=!1,e.autoplay=!1,e.playsInline=!0,e.preload="metadata";let c=new IntersectionObserver(T=>T.forEach(p=>p.isIntersecting?e.play():e.pause())),m=T=>{e.preload="auto",e.controls=!0,e.disableRemotePlayback=!0,e.disablePictureInPicture=!0,e.controlsList="noremoteplayback nodownload noplaybackrate",e.src=URL.createObjectURL(T)},d=()=>{let T=document.getElementById("progress-bar-video-love-stroy"),p=document.getElementById("progress-info-video-love-stroy");return P("GET",h).withNoBody().default({Range:"bytes=0-1"}).then(n=>{if(n.status===200)return e.preload="none",e.src=C.escapeHtml(h),l.appendChild(e),Promise.resolve();if(n.status!==206)throw new Error("failed to fetch video");e.addEventListener("error",()=>S.invalid("video"));let s=new Promise(b=>e.addEventListener("loadedmetadata",b,{once:!0}));return e.src=C.escapeHtml(h),l.appendChild(e),s}).then(()=>{e.pause(),e.currentTime=0,S.complete("video");let n=e.getBoundingClientRect().width*(e.videoHeight/e.videoWidth);return e.style.height=`${n}px`,l.style.height=`${n}px`,P("GET",h).withRetry().withProgressFunc((s,b)=>{let x=Number(s/b*100).toFixed(0)+"%";T.style.width=x,p.innerText=x}).default()}).then(n=>n.clone().blob().then(s=>{let b=new Promise(x=>e.addEventListener("loadedmetadata",x,{once:!0}));return m(s),e.load(),b.then(()=>n)})).catch(n=>{T.style.backgroundColor="red",p.innerText="Error loading video",console.error(n)})};return o.has(h).then(T=>T?T.blob().then(p=>{let n=new Promise(s=>e.addEventListener("loadedmetadata",s,{once:!0}));return m(p),l.appendChild(e),n.then(()=>S.complete("video"))}):o.del(h).then(d).then(p=>o.set(h,p))).then(()=>{c.observe(e),e.style.removeProperty("height"),l.style.removeProperty("height"),document.getElementById("video-love-stroy-loading")?.remove()})};return{init:()=>(S.add(),o=R("video").withForceCache(),{load:r})}})();var j=(()=>{let o=null,r=null,u=[],l=n=>new Promise((s,b)=>{let x=new Image;x.onload=()=>s(x),x.onerror=b,x.src=n}),h=(n,s)=>l(s).then(b=>{n.width=b.naturalWidth,n.height=b.naturalHeight,n.classList.remove("opacity-0"),n.src=b.src,b.remove(),S.complete("image")}),e=n=>{u.push({url:n.getAttribute("data-src"),res:s=>h(n,s),rej:s=>{console.error(s),S.invalid("image")}})},c=n=>{n.onerror=()=>S.invalid("image"),n.onload=()=>{n.width=n.naturalWidth,n.height=n.naturalHeight,S.complete("image")},n.complete&&n.naturalWidth!==0&&n.naturalHeight!==0?S.complete("image"):n.complete&&S.invalid("image")},m=()=>Array.from(o).some(n=>n.hasAttribute("data-src")),d=async()=>{let n=Array.from(o),s=async b=>{u.length=0,n.filter(b).forEach(x=>x.hasAttribute("data-src")?e(x):c(x)),await r.run(u,S.getAbort())};await s(b=>b.hasAttribute("fetchpriority")),await s(b=>!b.hasAttribute("fetchpriority"))},T=n=>{r.download(n,`${window.location.hostname}_image_${Date.now()}`)};return{init:()=>(r=R("image").withForceCache(),o=document.querySelectorAll("img"),o.forEach(S.add),{load:d,download:T,hasDataSrc:m})}})();var G=(()=>{let o='<i class="fa-solid fa-circle-pause spin-button"></i>',r='<i class="fa-solid fa-circle-play"></i>',u=async(h=!0)=>{let e=document.body.getAttribute("data-audio");if(!e){S.complete("audio",!0);return}let c=null;try{c=new Audio(await R("audio").withForceCache().get(e,S.getAbort())),c.loop=!0,c.muted=!1,c.autoplay=!1,c.controls=!1,S.complete("audio")}catch{S.invalid("audio");return}let m=!1,d=document.getElementById("button-music"),T=async()=>{if(!(!navigator.onLine||!d)){d.disabled=!0;try{await c.play(),m=!0,d.disabled=!1,d.innerHTML=o}catch(n){m=!1,C.notify(n).error()}}},p=()=>{m=!1,c.pause(),d.innerHTML=r};document.addEventListener("undangan.open",()=>{d.classList.remove("d-none"),h&&T()}),d.addEventListener("offline",p),d.addEventListener("click",()=>m?p():T())};return{init:()=>(S.add(),{load:u})}})();var W={tab:u=>window.bootstrap.Tab.getOrCreateInstance(document.getElementById(u)),modal:u=>window.bootstrap.Modal.getOrCreateInstance(document.getElementById(u))};var ne=o=>{let r="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css",u="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js",l=()=>o.get(r).then(e=>new Promise((c,m)=>{let d=document.createElement("link");d.onload=c,d.onerror=m,d.rel="stylesheet",d.href=e,document.head.appendChild(d)})),h=()=>o.get(u).then(e=>new Promise((c,m)=>{let d=document.createElement("script");d.onload=c,d.onerror=m,d.src=e,document.head.appendChild(d)}));return Promise.all([l(),h()]).then(()=>{if(typeof window.AOS>"u")throw new Error("AOS library failed to load");window.AOS.init()})},oe=o=>o.get("https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.js").then(u=>new Promise((l,h)=>{let e=document.createElement("script");e.onerror=h,e.onload=()=>{typeof window.confetti>"u"?h(new Error("Confetti library failed to load")):l()},e.src=u,document.head.appendChild(e)})),re=o=>{let r=[{css:"https://fonts.googleapis.com/css2?family=Sacramento&display=swap",family:"Sacramento"},{css:"https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic&display=swap",family:"Noto Naskh Arabic"}],u=({css:l,family:h})=>o.get(l).then(e=>new Promise((c,m)=>{let d=document.createElement("link");d.onload=c,d.onerror=m,d.rel="stylesheet",d.href=e,document.head.appendChild(d)})).then(()=>document.fonts.load(`1em "${h}"`));return Promise.all(r.map(u))},V=(o={})=>{let r=[],u=R("libs").withForceCache();return(o?.aos??!0)&&r.push(ne(u)),(o?.confetti??!0)&&r.push(oe(u)),(o?.additionalFont??!0)&&r.push(re(u)),Promise.all(r)};var k=o=>{let r=(c=null)=>{let m=JSON.parse(localStorage.getItem(o));return c?m[String(c)]:m},u=(c,m)=>{let d=r();d[String(c)]=m,localStorage.setItem(o,JSON.stringify(d))},l=c=>Object.keys(r()).includes(String(c)),h=c=>{if(!l(c))return;let m=r();delete m[String(c)],localStorage.setItem(o,JSON.stringify(m))},e=()=>localStorage.setItem(o,"{}");return localStorage.getItem(o)||e(),{set:u,get:r,has:l,clear:e,unset:h}};var B=(()=>{let o={"#000000":"#ffffff","#ffffff":"#000000","#212529":"#f8f9fa","#f8f9fa":"#212529"},r=["#ffffff","#f8f9fa"],u=["#000000","#212529"],l=!1,h=null,e=null,c=()=>h.set("active","light"),m=()=>h.set("active","dark"),d=w=>{let i=e.getAttribute("content");e.setAttribute("content",w.some(a=>a===i)?o[i]:i)},T=()=>{c(),document.documentElement.setAttribute("data-bs-theme","light"),d(u)},p=()=>{m(),document.documentElement.setAttribute("data-bs-theme","dark"),d(r)},n=(w=null,i=null)=>{let a=h.get("active")==="dark";return w&&i?a?w:i:a};return{init:()=>{switch(h=k("theme"),e=document.querySelector('meta[name="theme-color"]'),h.has("active")||(window.matchMedia("(prefers-color-scheme: dark)").matches?m():c()),document.documentElement.getAttribute("data-bs-theme")){case"dark":c();break;case"light":c();break;default:l=!0}n(),T()},spyTop:()=>{let w=a=>a.filter(v=>v.isIntersecting).forEach(v=>{let t=v.target.classList.contains("bg-white-black")?n(u[0],r[0]):n(u[1],r[1]);e.setAttribute("content",t)}),i=new IntersectionObserver(w,{rootMargin:"0% 0% -95% 0%"});document.querySelectorAll("section").forEach(a=>i.observe(a))},change:()=>n()?T():p(),isDarkMode:n,isAutoMode:()=>l}})();var J=(()=>{let o=({uuid:p,own:n,name:s,presence:b,comment:x,created_at:f,is_admin:w,is_parent:i,gif_url:a,ip:v,user_agent:t,comments:g,like_count:y})=>({uuid:p,own:n,name:s,presence:b,comment:x,created_at:f,is_admin:w??!1,is_parent:i,gif_url:a,ip:v,user_agent:t,comments:g?.map(o)??[],like_count:y??0}),r=p=>p.map(o);return{uuidResponse:({uuid:p})=>({uuid:p}),tokenResponse:({token:p})=>({token:p}),statusResponse:({status:p})=>({status:p}),getCommentResponse:o,getCommentsResponse:r,getCommentsResponseV2:p=>({count:p.count,lists:r(p.lists)}),commentShowMore:(p,n=!1)=>({uuid:p,show:n}),postCommentRequest:(p,n,s,b,x)=>({id:p,name:n,presence:s,comment:b,gif_id:x}),postSessionRequest:(p,n)=>({email:p,password:n}),updateCommentRequest:(p,n,s)=>({presence:p,comment:n,gif_id:s})}})();var H=(()=>{let o=null,r=()=>o.get("token"),u=p=>o.set("token",p),l=p=>P(U,"/api/session").body(p).send(J.tokenResponse).then(n=>(n.code===200&&(console.log(n),u(n.data.token)),n.code===200)),h=()=>o.unset("token"),e=()=>String(r()??".").split(".").length===3,c=p=>P("GET","/api/v2/config").withCache(1e3*60*30).withForceCache().token(p).send().then(n=>{if(n.code!==200)throw new Error("failed to get config.");let s=k("config");for(let[b,x]of Object.entries(n.data))s.set(b,x);return console.log("token",p),u(p),n}),m=()=>{if(!e())return null;try{return JSON.parse(C.base64Decode(r().split(".")[1]))}catch{return null}};return{init:()=>{o=k("session")},guest:c,isValid:()=>e()?(m()?.exp??0)>Date.now()/1e3:!1,login:l,logout:h,decode:m,isAdmin:e,setToken:u,getToken:r}})();var K=()=>window.confetti.shapeFromPath({path:"M167 72c19,-38 37,-56 75,-56 42,0 76,33 76,75 0,76 -76,151 -151,227 -76,-76 -151,-151 -151,-227 0,-42 33,-75 75,-75 38,0 57,18 76,56z",matrix:[.03333333333333333,0,0,.03333333333333333,-5.566666666666666,-5.533333333333333]}),X=()=>{window.confetti&&window.confetti({origin:{y:1},zIndex:1057})},Z=(o=15)=>{if(!window.confetti)return;let r=o*1e3,u=Date.now()+r,l=K(),h=["#FFC0CB","#FF1493","#C71585"],e=(m,d)=>Math.random()*(d-m)+m,c=()=>{let m=u-Date.now();h.forEach(d=>{window.confetti({particleCount:1,startVelocity:0,ticks:Math.max(50,75*(m/r)),origin:{x:Math.random(),y:Math.abs(Math.random()-m/r)},zIndex:1057,colors:[d],shapes:[l],drift:e(-.5,.5),gravity:e(.5,1),scalar:e(.5,1)})}),m>0&&requestAnimationFrame(c)};requestAnimationFrame(c)},Y=(o,r=50)=>{if(!window.confetti)return;let u=Date.now()+r,l=o.getBoundingClientRect(),h=Math.max(.3,Math.min(1,l.top/window.innerHeight+.2)),e=K(),c=["#FF69B4","#FF1493"],m=()=>{c.forEach(d=>{window.confetti({particleCount:2,angle:60,spread:55,shapes:[e],origin:{x:l.left/window.innerWidth,y:h},zIndex:1057,colors:[d]}),window.confetti({particleCount:2,angle:120,spread:55,shapes:[e],origin:{x:l.right/window.innerWidth,y:h},zIndex:1057,colors:[d]})}),Date.now()<u&&requestAnimationFrame(m)};requestAnimationFrame(m)};var Q=(()=>{let o=null,r=null,u=()=>{let i=new Date(document.body.getAttribute("data-time").replace(" ","T")).getTime(),a=A=>A<10?`0${A}`:`${A}`,v=document.getElementById("day"),t=document.getElementById("hour"),g=document.getElementById("minute"),y=document.getElementById("second"),E=()=>{let A=Math.abs(i-Date.now());v.textContent=a(Math.floor(A/(1e3*60*60*24))),t.textContent=a(Math.floor(A%(1e3*60*60*24)/(1e3*60*60))),g.textContent=a(Math.floor(A%(1e3*60*60)/(1e3*60))),y.textContent=a(Math.floor(A%(1e3*60)/1e3)),C.timeOut(E,1e3-Date.now()%1e3)};C.timeOut(E)},l=()=>{let i=window.location.search.split("to="),a=null;if(i.length>1&&i[1].length>=1&&(a=window.decodeURIComponent(i[1])),a){let t=document.getElementById("guest-name"),g=document.createElement("div");g.classList.add("m-2");let y=`<small class="mt-0 mb-1 mx-0 p-0">${C.escapeHtml(t?.getAttribute("data-message"))}</small><p class="m-0 p-0" style="font-size: 1.25rem">${C.escapeHtml(a)}</p>`;C.safeInnerHTML(g,y),t?.appendChild(g)}let v=document.getElementById("form-name");v&&(v.value=o.get("name")??a)},h=async()=>{let a=document.querySelectorAll(".slide-desktop");if(!a||a.length===0)return;let v=document.getElementById("root")?.querySelector(".d-sm-block");if(!v||(v.dispatchEvent(new Event("undangan.slide.stop")),window.getComputedStyle(v).display==="none"))return;if(a.length===1){await C.changeOpacity(a[0],!0);return}let t=0;for(let[A,L]of a.entries())if(A===t){L.classList.add("slide-desktop-active"),await C.changeOpacity(L,!0);break}let g=!0,y=async()=>(await C.changeOpacity(a[t],!1),a[t].classList.remove("slide-desktop-active"),t=(t+1)%a.length,g&&(a[t].classList.add("slide-desktop-active"),await C.changeOpacity(a[t],!0)),g);v.addEventListener("undangan.slide.stop",()=>{g=!1});let E=async()=>{await y()&&C.timeOut(E,6e3)};C.timeOut(E,6e3)},e=i=>{i.disabled=!0,document.body.scrollIntoView({behavior:"instant"}),document.getElementById("root").classList.remove("opacity-0"),B.isAutoMode()&&document.getElementById("button-theme").classList.remove("d-none"),h(),B.spyTop(),X(),C.timeOut(Z,1500),document.dispatchEvent(new Event("undangan.open")),C.changeOpacity(document.getElementById("welcome"),!1).then(a=>a.remove())},c=i=>{document.getElementById("button-modal-click").setAttribute("href",i.src),document.getElementById("button-modal-download").setAttribute("data-src",i.src);let a=document.getElementById("show-modal-image");a.src=i.src,a.width=i.width,a.height=i.height,W.modal("modal-image").show()},m=()=>{document.getElementById("show-modal-image").addEventListener("click",i=>{let a=i.currentTarget.parentNode.querySelector(".position-absolute");a.classList.contains("d-none")?a.classList.replace("d-none","d-flex"):a.classList.replace("d-flex","d-none")})},d=i=>{navigator.vibrate&&navigator.vibrate(500),Y(i,100),C.changeOpacity(i,!1).then(a=>a.remove())},T=()=>o.set("info",!0),p=()=>{document.querySelectorAll(".font-arabic").forEach(i=>{i.innerHTML=String(i.innerHTML).normalize("NFC")})},n=()=>{document.querySelectorAll("svg").forEach(i=>{i.hasAttribute("data-class")&&C.timeOut(()=>i.classList.add(i.getAttribute("data-class")),parseInt(i.getAttribute("data-time")))})},s=()=>{let i=t=>new Date(t.replace(" ","T")+":00Z").toISOString().replace(/[-:]/g,"").split(".").shift(),a=new URL("https://calendar.google.com/calendar/render"),v=new URLSearchParams({action:"TEMPLATE",text:"The Wedding of Wahyu and Riski",dates:`${i("2023-03-15 10:00")}/${i("2023-03-15 11:00")}`,details:"Tanpa mengurangi rasa hormat, kami mengundang Anda untuk berkenan menghadiri acara pernikahan kami. Terima kasih atas perhatian dan doa restu Anda, yang menjadi kebahagiaan serta kehormatan besar bagi kami.",location:"RT 10 RW 02, Desa Pajerukan, Kec. Kalibagor, Kab. Banyumas, Jawa Tengah 53191.",ctz:r.get("tz")});a.search=v.toString(),document.querySelector("#home button")?.addEventListener("click",()=>window.open(a,"_blank"))},b=()=>(S.add(),{load:a=>{V(a).then(()=>S.complete("libs")).catch(()=>S.invalid("libs"))}}),x=async()=>{n(),u(),l(),m(),p(),s(),o.has("presence")&&(document.getElementById("form-presence").value=o.get("presence")?"1":"2"),o.get("info")&&document.getElementById("information")?.remove(),await C.changeOpacity(document.getElementById("welcome"),!0),await C.changeOpacity(document.getElementById("loading"),!1).then(i=>i.remove())},f=()=>{S.init(),r=k("config"),o=k("information");let i=z.init(),a=j.init(),v=G.init(),t=b(),g=document.body.getAttribute("data-key"),y=new URLSearchParams(window.location.search);window.addEventListener("resize",C.debounce(h)),document.addEventListener("undangan.progress.done",()=>x()),document.addEventListener("hide.bs.modal",()=>document.activeElement?.blur()),document.getElementById("button-modal-download").addEventListener("click",E=>{a.download(E.currentTarget.getAttribute("data-src"))}),document.getElementById("comment")?.remove(),document.querySelector('a.nav-link[href="#comment"]')?.closest("li.nav-item")?.remove(),a.hasDataSrc()||a.load(),H.guest(y.get("k")??g).then(({data:E})=>{document.dispatchEvent(new Event("undangan.session")),S.complete("config"),a.hasDataSrc()&&a.load(),i.load(),v.load(),t.load({confetti:E.is_confetti_animation})}).catch(()=>S.invalid("config"))};return{init:()=>(B.init(),H.init(),H.isAdmin()&&(k("user").clear(),k("owns").clear(),k("likes").clear(),k("session").clear(),k("comment").clear()),window.addEventListener("load",()=>{_.init(f,["image","video","audio","libs","gif"])}),{util:C,theme:B,guest:{open:e,modal:c,showStory:d,closeInformation:T}})}})();(o=>{o.undangan=Q.init()})(window);})();
